foo(x: int, y: int, ok: (int)) {
    add(x, y, ok)
}

foo_unwrapper(env_end: int) {
    x: int = env_end - 4 words (x)
    y: int = env_end - 3 words (y)
    ok: (int) = env_end - 2 words (ok)
    foo(x, y, ok)
}

add(x: int, y: int, ok: (int)) {
    res = @add(x, y);
    ok(res)
}

add_unwrapper(env_end: int) {
    x: int = env_end - 4 words (x)
    y: int = env_end - 3 words (y)
    ok: (int) = env_end - 2 words (ok)
    add(x, y, ok)
}

_4_run_k(ok: (), x: int) {
    _5 = "number: %d"
    __result = @printf(_5, x)
    ok(__result)
}

_4_run_k_unwrapper(env_end: int) {
    ok: () = env_end - 3 words (ok)
    x: int = env_end - 1 words (x)
    _4_run_k(ok, x)
}

_9_run(a: ((int)), ok: ()) {
    _10_k = _4_run_k(ok)
    _10_k.ok = ok

    a(_10_k)
}

_9_run_unwrapper(env_end: int) {
    a: ((int)) = env_end - 4 words (a)
    ok: () = env_end - 2 words (ok)
    _9_run(a, ok)
}

_13_run(b: ((int)), ok: ()) {
    _14_k = _4_run_k(ok)
    _14_k.ok = ok

    b(_14_k)
}

_13_run_unwrapper(env_end: int) {
    b: ((int)) = env_end - 4 words (b)
    ok: () = env_end - 2 words (ok)
    _13_run(b, ok)
}

run(ok: ()) {
    _1 = 1
    _2 = 2
    _3 = 3
    _6 = 1
    _7 = 1
    a = foo(_1, _2)
    a.x = _1
    a.y = _2

    _11_run = _9_run(a, ok)
    _11_run.a = a
    _11_run.ok = ok

    b = foo(_1, _3)
    b.x = _1
    b.y = _3

    _15_run = _13_run(b, ok)
    _15_run.b = b
    _15_run.ok = ok

    eqi(_6, _7, _11_run, _15_run)
}

run_unwrapper(env_end: int) {
    ok: () = env_end - 2 words (ok)
    run(ok)
}

eqi(left: int, right: int, ok: (), err: ()) {
    __result = @eqi(left, right);
    ok(__result)
}

eqi_unwrapper(env_end: int) {
    left: int = env_end - 6 words (left)
    right: int = env_end - 5 words (right)
    ok: () = env_end - 4 words (ok)
    err: () = env_end - 2 words (err)
    eqi(left, right, ok, err)
}

_17_lambda() {
    _18 = 0
    exit(_18)
}

_17_lambda_unwrapper(env_end: int) {
    _17_lambda()
}

exit(code: int) {
    syscall exit(code)
}

exit_unwrapper(env_end: int) {
    code: int = env_end - 1 words (code)
    exit(code)
}

_start() {
    _17_lambda = _17_lambda()
    run(_17_lambda)
}
