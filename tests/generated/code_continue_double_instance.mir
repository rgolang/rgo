foo($x: int, $y: int, $ok: (int)) {
    add($x, $y, $ok)
}

foo_unwrapper($env_end: int) {
    $x: int = $env_end - 3w
    $y: int = $env_end - 2w
    $ok: (int) = $env_end - 1w
    release $env_end
    foo($x, $y, $ok)
}

foo_release($env_end: int) {
    $__num_curried: int = $env_end + 5w
    if ($__num_curried < 1){ jump foo_release_if_num_curried_lt_1 }
    call @release_heap_ptr($env_end - 1w)
    jump foo_release_done
    foo_release_if_num_curried_lt_1:
    foo_release_done:
    return
}

foo_deepcopy($env_end: int) {
    $num_curried: int = $env_end + 5w
    if ($num_curried < 1){ jump foo_deepcopy_if_num_curried_lt_1 }
    new_env + 2w = call @deepcopy_heap_ptr($env_end - 1w)
    jump foo_deepcopy_done
    foo_deepcopy_if_num_curried_lt_1:
    foo_deepcopy_done:
    return
}

add($x: int, $y: int, $ok: (int)) {
    $res = @add($x, $y);
    $ok($res)
}

add_unwrapper($env_end: int) {
    $x: int = $env_end - 3w
    $y: int = $env_end - 2w
    $ok: (int) = $env_end - 1w
    release $env_end
    add($x, $y, $ok)
}

_4_run_k($ok: (), $x: int) {
    $_5 = "number: %d"
    $__result = call @printf($_5, $x)
    $ok($__result)
}

_4_run_k_unwrapper($env_end: int) {
    $ok: () = $env_end - 2w
    $x: int = $env_end - 1w
    release $env_end
    _4_run_k($ok, $x)
}

_4_run_k_release($env_end: int) {
    $__num_curried: int = $env_end + 5w
    if ($__num_curried < 1){ jump _4_run_k_release_if_num_curried_lt_1 }
    call @release_heap_ptr($env_end - 2w)
    jump _4_run_k_release_done
    _4_run_k_release_if_num_curried_lt_1:
    _4_run_k_release_done:
    return
}

_4_run_k_deepcopy($env_end: int) {
    $num_curried: int = $env_end + 5w
    if ($num_curried < 1){ jump _4_run_k_deepcopy_if_num_curried_lt_1 }
    new_env + 0w = call @deepcopy_heap_ptr($env_end - 2w)
    jump _4_run_k_deepcopy_done
    _4_run_k_deepcopy_if_num_curried_lt_1:
    _4_run_k_deepcopy_done:
    return
}

_9_run($a: ((int)), $ok: ()) {
    $_10_k = (_4_run_k_unwrapper, {()})
    $_10_k.$ok = $ok

    $a($_10_k)
}

_9_run_unwrapper($env_end: int) {
    $a: ((int)) = $env_end - 2w
    $ok: () = $env_end - 1w
    release $env_end
    _9_run($a, $ok)
}

_9_run_release($env_end: int) {
    $__num_curried: int = $env_end + 5w
    if ($__num_curried < 2){ jump _9_run_release_if_num_curried_lt_2 }
    call @release_heap_ptr($env_end - 2w)
    call @release_heap_ptr($env_end - 1w)
    jump _9_run_release_done
    _9_run_release_if_num_curried_lt_2:
    if ($__num_curried < 1){ jump _9_run_release_if_num_curried_lt_1 }
    call @release_heap_ptr($env_end - 2w)
    jump _9_run_release_done
    _9_run_release_if_num_curried_lt_1:
    _9_run_release_done:
    return
}

_9_run_deepcopy($env_end: int) {
    $num_curried: int = $env_end + 5w
    if ($num_curried < 2){ jump _9_run_deepcopy_if_num_curried_lt_2 }
    new_env + 0w = call @deepcopy_heap_ptr($env_end - 2w)
    new_env + 1w = call @deepcopy_heap_ptr($env_end - 1w)
    jump _9_run_deepcopy_done
    _9_run_deepcopy_if_num_curried_lt_2:
    if ($num_curried < 1){ jump _9_run_deepcopy_if_num_curried_lt_1 }
    new_env + 0w = call @deepcopy_heap_ptr($env_end - 2w)
    jump _9_run_deepcopy_done
    _9_run_deepcopy_if_num_curried_lt_1:
    _9_run_deepcopy_done:
    return
}

_13_run($b: ((int)), $ok: ()) {
    $_14_k = (_4_run_k_unwrapper, {()})
    $_14_k.$ok = $ok

    $b($_14_k)
}

_13_run_unwrapper($env_end: int) {
    $b: ((int)) = $env_end - 2w
    $ok: () = $env_end - 1w
    release $env_end
    _13_run($b, $ok)
}

_13_run_release($env_end: int) {
    $__num_curried: int = $env_end + 5w
    if ($__num_curried < 2){ jump _13_run_release_if_num_curried_lt_2 }
    call @release_heap_ptr($env_end - 2w)
    call @release_heap_ptr($env_end - 1w)
    jump _13_run_release_done
    _13_run_release_if_num_curried_lt_2:
    if ($__num_curried < 1){ jump _13_run_release_if_num_curried_lt_1 }
    call @release_heap_ptr($env_end - 2w)
    jump _13_run_release_done
    _13_run_release_if_num_curried_lt_1:
    _13_run_release_done:
    return
}

_13_run_deepcopy($env_end: int) {
    $num_curried: int = $env_end + 5w
    if ($num_curried < 2){ jump _13_run_deepcopy_if_num_curried_lt_2 }
    new_env + 0w = call @deepcopy_heap_ptr($env_end - 2w)
    new_env + 1w = call @deepcopy_heap_ptr($env_end - 1w)
    jump _13_run_deepcopy_done
    _13_run_deepcopy_if_num_curried_lt_2:
    if ($num_curried < 1){ jump _13_run_deepcopy_if_num_curried_lt_1 }
    new_env + 0w = call @deepcopy_heap_ptr($env_end - 2w)
    jump _13_run_deepcopy_done
    _13_run_deepcopy_if_num_curried_lt_1:
    _13_run_deepcopy_done:
    return
}

run($ok: ()) {
    $_1 = 1
    $_2 = 2
    $_3 = 3
    $_6 = 1
    $_7 = 1
    $a = (foo_unwrapper, {int, int})
    $a.$x = $_1
    $a.$y = $_2

    $_11_run = (_9_run_unwrapper, {((int)), ()})
    $_11_run.$a = $a
    $_11_run.$ok = $ok

    $b = (foo_unwrapper, {int, int})
    $b.$x = $_1
    $b.$y = $_3

    $_15_run = (_13_run_unwrapper, {((int)), ()})
    $_15_run.$b = $b
    $_15_run.$ok = $ok

    eqi($_6, $_7, $_11_run, $_15_run)
}

run_unwrapper($env_end: int) {
    $ok: () = $env_end - 1w
    release $env_end
    run($ok)
}

run_release($env_end: int) {
    $__num_curried: int = $env_end + 5w
    if ($__num_curried < 1){ jump run_release_if_num_curried_lt_1 }
    call @release_heap_ptr($env_end - 1w)
    jump run_release_done
    run_release_if_num_curried_lt_1:
    run_release_done:
    return
}

run_deepcopy($env_end: int) {
    $num_curried: int = $env_end + 5w
    if ($num_curried < 1){ jump run_deepcopy_if_num_curried_lt_1 }
    new_env + 0w = call @deepcopy_heap_ptr($env_end - 1w)
    jump run_deepcopy_done
    run_deepcopy_if_num_curried_lt_1:
    run_deepcopy_done:
    return
}

eqi($left: int, $right: int, $ok: (), $err: ()) {
    $__result = @eqi($left, $right);
    $ok($__result)
}

eqi_unwrapper($env_end: int) {
    $left: int = $env_end - 4w
    $right: int = $env_end - 3w
    $ok: () = $env_end - 2w
    $err: () = $env_end - 1w
    release $env_end
    eqi($left, $right, $ok, $err)
}

_17_lambda() {
    $_18 = 0
    exit($_18)
}

_17_lambda_unwrapper($env_end: int) {
    release $env_end
    _17_lambda()
}

_17_lambda_release($env_end: int) {
    return
}

_17_lambda_deepcopy($env_end: int) {
    return
}

exit($code: int) {
    syscall exit($code)
}

exit_unwrapper($env_end: int) {
    $code: int = $env_end - 1w
    release $env_end
    exit($code)
}

_start() {
    $_17_lambda = (_17_lambda_unwrapper, {})
    run($_17_lambda)
}
