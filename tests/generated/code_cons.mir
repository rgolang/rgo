nil($cb: (int, ((int, ()), ())), $end: ()) {
    release $cb
    $end()
}

nil_unwrapper($env_end: int) {
    $cb: (int, ((int, ()), ())) = $env_end - 2 words
    $end: () = $env_end - 1 words
    nil($cb, $end)
}

cons($h: int, $t: ((int, ()), ()), $cb: (int, ((int, ()), ())), $end: ()) {
    release $end
    $cb($h, $t)
}

cons_unwrapper($env_end: int) {
    $h: int = $env_end - 4 words
    $t: ((int, ()), ()) = $env_end - 3 words
    $cb: (int, ((int, ()), ())) = $env_end - 2 words
    $end: () = $env_end - 1 words
    cons($h, $t, $cb, $end)
}
