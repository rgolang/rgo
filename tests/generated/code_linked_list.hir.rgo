@/str
@/int
@/printf
@/exit
list: ((int, list), ())
nil: (next:(int, list), end:()){
    end()
}

cons: (head: int, tail: list, next:(int, list), end:()){
    next(head, tail)
}

iterate: (handler:(int, ()), arr: list, end:()){
    _iterate_0: _iterate_1(handler, end)
    arr(_iterate_0, end)
}

_iterate_1: (handler:(int, ()), end:(), head: int, tail: list){
    _iterate__iterate_1_iterate_0: iterate(handler, tail, end)
    handler(head, _iterate__iterate_1_iterate_0)
}
_0: 1
_1: 2
_2: 3
_3: 4
_cons_4: cons(_3, nil)
_cons_5: cons(_2, _cons_4)
_cons_6: cons(_1, _cons_5)
mylist: cons(_0, _cons_6)
handler: (n: int, ok:()){
    _handler_0: "%d, "
    printf(_handler_0, n, ok)
}

end: (){
    _end_0: "end\n"
    _end_1: _end_2()
    printf(_end_0, _end_1)
}

_end_2: (){
    _end__end_2_0: 0
    exit(_end__end_2_0)
}
iterate(handler, mylist, end)
