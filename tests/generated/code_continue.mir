foo(x: int, y: int, ok: (int)) {
    add(x, y, ok)
}

foo_unwrapper(env_end: int) {
    x: int = env_end - 4 words (x)
    y: int = env_end - 3 words (y)
    ok: (int) = env_end - 2 words (ok)
    foo(x, y, ok)
}

add(x: int, y: int, ok: (int)) {
    res = @add(x, y);
    ok(res)
}

add_unwrapper(env_end: int) {
    x: int = env_end - 4 words (x)
    y: int = env_end - 3 words (y)
    ok: (int) = env_end - 2 words (ok)
    add(x, y, ok)
}

_3_run_k(ok: (), x: int) {
    _4 = "number: %d"
    __result = @printf(_4, x)
    ok(__result)
}

_3_run_k_unwrapper(env_end: int) {
    ok: () = env_end - 3 words (ok)
    x: int = env_end - 1 words (x)
    _3_run_k(ok, x)
}

run(ok: ()) {
    _1 = 1
    _2 = 2
    _5_k = _3_run_k(ok)
    _5_k.ok = ok

    a = foo(_1, _2)
    a.x = _1
    a.y = _2

    a(_5_k)
}

run_unwrapper(env_end: int) {
    ok: () = env_end - 2 words (ok)
    run(ok)
}

_7_lambda() {
    _8 = 0
    exit(_8)
}

_7_lambda_unwrapper(env_end: int) {
    _7_lambda()
}

exit(code: int) {
    syscall exit(code)
}

exit_unwrapper(env_end: int) {
    code: int = env_end - 1 words (code)
    exit(code)
}

_start() {
    _7_lambda = _7_lambda()
    run(_7_lambda)
}
