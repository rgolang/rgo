true($x: (), $y: ()) {
    release $y
    $x()
}

true_unwrapper($env_end: int) {
    $x: () = $env_end - 4 words (x)
    $y: () = $env_end - 2 words (y)
    true($x, $y)
}

false($x: (), $y: ()) {
    release $x
    $y()
}

false_unwrapper($env_end: int) {
    $x: () = $env_end - 4 words (x)
    $y: () = $env_end - 2 words (y)
    false($x, $y)
}

if($cond: ((), ()), $yes: (), $no: ()) {
    $cond($yes, $no)
}

if_unwrapper($env_end: int) {
    $cond: ((), ()) = $env_end - 6 words (cond)
    $yes: () = $env_end - 4 words (yes)
    $no: () = $env_end - 2 words (no)
    if($cond, $yes, $no)
}

_6_lambda() {
    $_7 = 0
    exit($_7)
}

_6_lambda_unwrapper($env_end: int) {
    _6_lambda()
}

exit($code: int) {
    syscall exit($code)
}

exit_unwrapper($env_end: int) {
    $code: int = $env_end - 1 words (code)
    exit($code)
}

_3_lambda() {
    $_4 = "works"
    $_6_lambda = (_6_lambda_unwrapper, {})
    $__result = @printf($_4)
    $_6_lambda($__result)
}

_3_lambda_unwrapper($env_end: int) {
    _3_lambda()
}

_14_lambda() {
    $_15 = 0
    exit($_15)
}

_14_lambda_unwrapper($env_end: int) {
    _14_lambda()
}

_11_lambda() {
    $_12 = "doesn't work"
    $_14_lambda = (_14_lambda_unwrapper, {})
    $__result = @printf($_12)
    $_14_lambda($__result)
}

_11_lambda_unwrapper($env_end: int) {
    _11_lambda()
}

_start() {
    $true = (true_unwrapper, {})
    $_3_lambda = (_3_lambda_unwrapper, {})
    $_11_lambda = (_11_lambda_unwrapper, {})
    if($true, $_3_lambda, $_11_lambda)
}
