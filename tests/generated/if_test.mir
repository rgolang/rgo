true($x: (), $y: ()) {
    release $y
    $x()
}

true_unwrapper($env_end: int) {
    $x: () = $env_end - 2w
    $y: () = $env_end - 1w
    release $env_end
    true($x, $y)
}

true_release($env_end: int) {
    $__num_curried: int = $env_end + 5w
    if ($__num_curried < 2){ jump true_release_if_num_curried_lt_2 }
    call @release_heap_ptr($env_end - 2w)
    call @release_heap_ptr($env_end - 1w)
    jump true_release_done
    true_release_if_num_curried_lt_2:
    if ($__num_curried < 1){ jump true_release_if_num_curried_lt_1 }
    call @release_heap_ptr($env_end - 2w)
    jump true_release_done
    true_release_if_num_curried_lt_1:
    true_release_done:
    return
}

true_deepcopy($env_end: int) {
    $num_curried: int = $env_end + 5w
    if ($num_curried < 2){ jump true_deepcopy_if_num_curried_lt_2 }
    new_env + 0w = call @deepcopy_heap_ptr($env_end - 2w)
    new_env + 1w = call @deepcopy_heap_ptr($env_end - 1w)
    jump true_deepcopy_done
    true_deepcopy_if_num_curried_lt_2:
    if ($num_curried < 1){ jump true_deepcopy_if_num_curried_lt_1 }
    new_env + 0w = call @deepcopy_heap_ptr($env_end - 2w)
    jump true_deepcopy_done
    true_deepcopy_if_num_curried_lt_1:
    true_deepcopy_done:
    return
}

false($x: (), $y: ()) {
    release $x
    $y()
}

false_unwrapper($env_end: int) {
    $x: () = $env_end - 2w
    $y: () = $env_end - 1w
    release $env_end
    false($x, $y)
}

false_release($env_end: int) {
    $__num_curried: int = $env_end + 5w
    if ($__num_curried < 2){ jump false_release_if_num_curried_lt_2 }
    call @release_heap_ptr($env_end - 2w)
    call @release_heap_ptr($env_end - 1w)
    jump false_release_done
    false_release_if_num_curried_lt_2:
    if ($__num_curried < 1){ jump false_release_if_num_curried_lt_1 }
    call @release_heap_ptr($env_end - 2w)
    jump false_release_done
    false_release_if_num_curried_lt_1:
    false_release_done:
    return
}

false_deepcopy($env_end: int) {
    $num_curried: int = $env_end + 5w
    if ($num_curried < 2){ jump false_deepcopy_if_num_curried_lt_2 }
    new_env + 0w = call @deepcopy_heap_ptr($env_end - 2w)
    new_env + 1w = call @deepcopy_heap_ptr($env_end - 1w)
    jump false_deepcopy_done
    false_deepcopy_if_num_curried_lt_2:
    if ($num_curried < 1){ jump false_deepcopy_if_num_curried_lt_1 }
    new_env + 0w = call @deepcopy_heap_ptr($env_end - 2w)
    jump false_deepcopy_done
    false_deepcopy_if_num_curried_lt_1:
    false_deepcopy_done:
    return
}

if($cond: ((), ()), $yes: (), $no: ()) {
    $cond($yes, $no)
}

if_unwrapper($env_end: int) {
    $cond: ((), ()) = $env_end - 3w
    $yes: () = $env_end - 2w
    $no: () = $env_end - 1w
    release $env_end
    if($cond, $yes, $no)
}

if_release($env_end: int) {
    $__num_curried: int = $env_end + 5w
    if ($__num_curried < 3){ jump if_release_if_num_curried_lt_3 }
    call @release_heap_ptr($env_end - 3w)
    call @release_heap_ptr($env_end - 2w)
    call @release_heap_ptr($env_end - 1w)
    jump if_release_done
    if_release_if_num_curried_lt_3:
    if ($__num_curried < 2){ jump if_release_if_num_curried_lt_2 }
    call @release_heap_ptr($env_end - 3w)
    call @release_heap_ptr($env_end - 2w)
    jump if_release_done
    if_release_if_num_curried_lt_2:
    if ($__num_curried < 1){ jump if_release_if_num_curried_lt_1 }
    call @release_heap_ptr($env_end - 3w)
    jump if_release_done
    if_release_if_num_curried_lt_1:
    if_release_done:
    return
}

if_deepcopy($env_end: int) {
    $num_curried: int = $env_end + 5w
    if ($num_curried < 3){ jump if_deepcopy_if_num_curried_lt_3 }
    new_env + 0w = call @deepcopy_heap_ptr($env_end - 3w)
    new_env + 1w = call @deepcopy_heap_ptr($env_end - 2w)
    new_env + 2w = call @deepcopy_heap_ptr($env_end - 1w)
    jump if_deepcopy_done
    if_deepcopy_if_num_curried_lt_3:
    if ($num_curried < 2){ jump if_deepcopy_if_num_curried_lt_2 }
    new_env + 0w = call @deepcopy_heap_ptr($env_end - 3w)
    new_env + 1w = call @deepcopy_heap_ptr($env_end - 2w)
    jump if_deepcopy_done
    if_deepcopy_if_num_curried_lt_2:
    if ($num_curried < 1){ jump if_deepcopy_if_num_curried_lt_1 }
    new_env + 0w = call @deepcopy_heap_ptr($env_end - 3w)
    jump if_deepcopy_done
    if_deepcopy_if_num_curried_lt_1:
    if_deepcopy_done:
    return
}

_6_lambda() {
    $_7 = 0
    exit($_7)
}

_6_lambda_unwrapper($env_end: int) {
    release $env_end
    _6_lambda()
}

_6_lambda_release($env_end: int) {
    return
}

_6_lambda_deepcopy($env_end: int) {
    return
}

exit($code: int) {
    syscall exit($code)
}

exit_unwrapper($env_end: int) {
    $code: int = $env_end - 1w
    release $env_end
    exit($code)
}

_3_lambda() {
    $_4 = "works"
    $_6_lambda = (_6_lambda_unwrapper, {})
    $__result = call @printf($_4)
    $_6_lambda($__result)
}

_3_lambda_unwrapper($env_end: int) {
    release $env_end
    _3_lambda()
}

_3_lambda_release($env_end: int) {
    return
}

_3_lambda_deepcopy($env_end: int) {
    return
}

_14_lambda() {
    $_15 = 0
    exit($_15)
}

_14_lambda_unwrapper($env_end: int) {
    release $env_end
    _14_lambda()
}

_14_lambda_release($env_end: int) {
    return
}

_14_lambda_deepcopy($env_end: int) {
    return
}

_11_lambda() {
    $_12 = "doesn't work"
    $_14_lambda = (_14_lambda_unwrapper, {})
    $__result = call @printf($_12)
    $_14_lambda($__result)
}

_11_lambda_unwrapper($env_end: int) {
    release $env_end
    _11_lambda()
}

_11_lambda_release($env_end: int) {
    return
}

_11_lambda_deepcopy($env_end: int) {
    return
}

_start() {
    $true = (true_unwrapper, {})
    $_3_lambda = (_3_lambda_unwrapper, {})
    $_11_lambda = (_11_lambda_unwrapper, {})
    if($true, $_3_lambda, $_11_lambda)
}
