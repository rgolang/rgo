@str
@int
@printf
@exit

list: ((int, list), ())
nil: (next:(int, list), end: ()){
    end()
}
cons: (head:int, tail:list, next:(int, list), end: ()){
    next(head, tail)
}
iterate: (handler: (int, ()), arr: list, end: ()){
    arr((head:int, tail:list){
        handler(head, iterate(handler, tail, end))
    }, end)
}
mylist: cons(1, cons(2, cons(3, cons(4, nil))))
handler: (n: int, ok: ()){
    printf("%d, ", n, ok)
}
end: {printf("end\n", exit(0))}
iterate(handler, mylist, end)
